# First Responder

SPA など、ローディングに時間がかかるが応答を早く済ませたい場合に返す HTML のテンプレート


## デモ

<https://koharakazuya.github.io/first-responder/>


## HTML 内容解説

以下の順にレンダリングする。全てブロックしながら次に進むため、順序の前にあるものは利用できることに注意。

- `<style>` 要素 (ローディングスピナーの CSS)
- コンテンツのコンテナ要素
  - `.loading` 要素 (ローディングスピナーの実体となる要素)
- `<script>` 要素 (ローディングスピナー表示切り替えの JS)

`<style>` 要素内の記述は全てローティングスピナーを CSS で生成するための表現。
ただし、ローディング開始から **少ししてから** ローディングスピナーを表示するため、`.-show` で表示の切り替えを制御している。
(少ししてから表示するのは、十分ロードが早い環境でもローディングスピナーが一瞬表示されると鬱陶しいため)

コンテンツのコンテナ要素は十分に小さなサイズの HTML 要素となる想定。
この部分がアプリケーションコードである JavaScript によって書き換えられる。
アプリケーションのレイアウトに合わせて `.loading` を連携、表示させる。

`<script>` 要素内の記述はローディングスピナーを遅延表示させるための制御。
内部で DOM アクセスがあるが、参照している `.loading` は前に記述されているため、必ず利用できる。
